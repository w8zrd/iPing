import{u as p,c as h,e as N,r as n,s as c,j as e}from"./index-BFcJZT_m.js";import{N as j,M as g}from"./Navigation-Dfno_2b8.js";import{H as b}from"./Header-C8AQHQev.js";import{A as v,a as y}from"./Avatar-BkcTkP87.js";import{L as w}from"./loader-circle-CxsxKMvs.js";import{U as _}from"./user-plus-BDhr2G2M.js";import{H as k}from"./heart-zuYBrX7w.js";import"./createLucideIcon-BHP_jijh.js";import"./x-DSI2zZ5M.js";import"./utils-Dtjc6EhN.js";const R=()=>{p();const{user:r}=h(),{markNotificationAsRead:l}=N(),[o,d]=n.useState([]),[m,x]=n.useState(!0);n.useEffect(()=>{r&&f()},[r]);const f=async()=>{try{const{data:s,error:t}=await c.from("notifications").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});if(t)throw t;d(s||[]),s?.forEach(async a=>{a.is_read||(await c.from("notifications").update({is_read:!0}).eq("id",a.id),l(a.id))})}catch(s){console.error("Error fetching notifications:",s)}finally{x(!1)}},u=s=>{switch(s){case"like":return e.jsx(k,{className:"h-5 w-5 text-red-500 fill-red-500"});case"friend_request":return e.jsx(_,{className:"h-5 w-5 text-primary"});case"comment":return e.jsx(g,{className:"h-5 w-5 text-blue-500"});default:return null}};return m?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"min-h-screen pb-32",children:[e.jsx(b,{}),e.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[e.jsx("div",{className:"mb-8 pt-24 animate-fade-in",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"})}),e.jsx("div",{className:"glass-strong rounded-3xl shadow-md overflow-hidden",children:o.length===0?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No notifications yet"}):o.map((s,t)=>{const a=typeof s.content=="string"?JSON.parse(s.content):s.content,i=a.actor||{displayName:"Unknown",username:"unknown"};return e.jsx("div",{className:`p-4 animate-fade-in border-b border-border/30 last:border-b-0 ${s.is_read?"":"bg-primary/5"}`,style:{animationDelay:`${t*.05}s`},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"w-12 h-12",children:e.jsx(y,{className:"bg-gradient-to-br from-primary via-primary/80 to-primary/50 text-white font-bold",children:i.displayName?.[0]?.toUpperCase()||"?"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-background rounded-full p-0.5",children:u(s.type)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-semibold",children:i.displayName}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["@",i.username]})]}),e.jsx("p",{className:"text-sm text-foreground/80",children:a.text||"New notification"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.created_at).toLocaleString()})]})]})},s.id)})})]}),e.jsx(j,{})]})};export{R as default};

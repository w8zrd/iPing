import{u as j,c as b,f as g,r as n,s as d,j as e,S as o}from"./index-VuugSLij.js";import{N as l,M as v}from"./Navigation-CgP2WW-I.js";import{H as m}from"./Header-Dvf4mCMd.js";import{A as w,a as y}from"./Avatar-CQZ-e27r.js";import{U as k}from"./user-plus-CAC8maA8.js";import{H as _}from"./heart-DZAXwy7y.js";import"./createLucideIcon-B_Gbu9ck.js";import"./x-CFAN0sea.js";const L=()=>{j();const{user:r}=b(),{markNotificationAsRead:x}=g(),[c,f]=n.useState([]),[h,u]=n.useState(!0);n.useEffect(()=>{r&&N()},[r]);const N=async()=>{try{const{data:s,error:t}=await d.from("notifications").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});if(t)throw t;f(s||[]),s?.forEach(async a=>{a.is_read||(await d.from("notifications").update({is_read:!0}).eq("id",a.id),x(a.id))})}catch(s){console.error("Error fetching notifications:",s)}finally{u(!1)}},p=s=>{switch(s){case"like":return e.jsx(_,{className:"h-5 w-5 text-red-500 fill-red-500"});case"friend_request":return e.jsx(k,{className:"h-5 w-5 text-primary"});case"comment":return e.jsx(v,{className:"h-5 w-5 text-blue-500"});default:return null}};return h?e.jsxs("div",{className:"min-h-screen pb-32 bg-background",children:[e.jsx(m,{}),e.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[e.jsx("div",{className:"mb-8 pt-24 animate-fade-in",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"})}),e.jsx("div",{className:"glass-strong rounded-3xl shadow-md overflow-hidden",children:[1,2,3,4,5].map(s=>e.jsx("div",{className:"p-4 border-b border-border/30 last:border-b-0",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(o,{className:"w-12 h-12 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(o,{className:"h-4 w-1/3"}),e.jsx(o,{className:"h-3 w-1/2"})]})]})},s))})]}),e.jsx(l,{})]}):e.jsxs("div",{className:"min-h-screen pb-32 bg-background",children:[e.jsx(m,{}),e.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[e.jsx("div",{className:"mb-8 pt-24 animate-fade-in",children:e.jsx("h1",{className:"text-3xl font-bold",children:"Notifications"})}),e.jsx("div",{className:"glass-strong rounded-3xl shadow-md overflow-hidden",children:c.length===0?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"No notifications yet"}):c.map((s,t)=>{const a=typeof s.content=="string"?JSON.parse(s.content):s.content,i=a.actor||{displayName:"Unknown",username:"unknown"};return e.jsx("div",{className:`p-4 animate-fade-in border-b border-border/30 last:border-b-0 ${s.is_read?"":"bg-primary/5"}`,style:{animationDelay:`${t*.05}s`},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"w-12 h-12",children:e.jsx(y,{className:"bg-gradient-to-br from-primary via-primary/80 to-primary/50 text-white font-bold",children:i.displayName?.[0]?.toUpperCase()||"?"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-background rounded-full p-0.5",children:p(s.type)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-semibold",children:i.displayName}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:["@",i.username]})]}),e.jsx("p",{className:"text-sm text-foreground/80",children:a.text||"New notification"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.created_at).toLocaleString()})]})]})},s.id)})})]}),e.jsx(l,{})]})};export{L as default};
